<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emotion Loop Ritual</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

    body {
      background-color: black;
      color: #39ffea;
      font-family: 'VT323', monospace;
      overflow: hidden;
      margin: 0;
    }

    svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
    }

    .light {
      fill: #39ffea;
      filter: drop-shadow(0 0 10px #39ffea);
    }

    .node-label {
      position: absolute;
      font-size: 1.2rem;
      white-space: nowrap;
      pointer-events: none;
    }

    .card {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.5);
      opacity: 0;
      font-size: 2rem;
      border: 2px solid #39ffea;
      padding: 1rem 2rem;
      background: rgba(0, 0, 0, 0.8);
      color: #39ffea;
      box-shadow: 0 0 20px #39ffea44;
      cursor: pointer;
      transition: box-shadow 0.3s;
    }

    .card:hover {
      box-shadow: 0 0 30px #39ffea;
    }

    .system-log {
      position: absolute;
      bottom: 20px;
      left: 20px;
      font-size: 1rem;
      color: #39ffea;
      opacity: 0.8;
    }

    .card-description {
      position: absolute;
      top: 75%;
      left: 50%;
      transform: translate(-50%, 0);
      color: #39ffea;
      font-size: 1.1rem;
      text-align: center;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }

    #finalCard {
      cursor: pointer;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 10px #39ffea44; }
      50% { box-shadow: 0 0 25px #39ffea; }
      100% { box-shadow: 0 0 10px #39ffea44; }
    }
  </style>
</head>
<body>
  <div class="node-label" style="top: 30%; left: 20%;">CODE: NN-131<br>STRANGE LOOP</div>
  <div class="node-label" style="top: 60%; left: 50%;">DESCRIPTION:<br>Î∞òÎ≥µÎêú Í∞êÏ†ïÏù¥ Îòê Îã§Î•∏ Í∞êÏ†ïÏùÑ ÎßåÎì†Îã§</div>
  <div class="node-label" style="top: 75%; left: 70%;">ÎπÑÎ∞Ä ÎÖ∏Îìú Í∞êÏßÄ<br>Ï∂úÎ†• ÌôïÎ•† 15%</div>

  <div class="card" id="finalCard">[ECLIPSED CORE]</div>
  <div class="card" id="secretCard">[SECRET CARD - ??]</div>
  <div class="card-description" id="cardDescription"></div>
  <div class="system-log" id="systemLog">[SYSTEM ONLINE] Í∞êÏ†ï ÌöåÎ°ú Ï†ëÏÜç Ï§ë...</div>

  <audio id="bgm" loop>
    <source src="https://cdn.pixabay.com/audio/2023/03/30/audio_59e1a4fb9a.mp3" type="audio/mp3">
  </audio>

  <svg viewBox="0 0 800 600">
    <path id="emotionPath" d="M 100 300 C 200 100, 600 100, 700 300 C 600 500, 200 500, 100 300" stroke="#39ffea" fill="none" stroke-width="2" />
    <circle id="particle" class="light" r="8" />
  </svg>

  <script>
    gsap.registerPlugin(MotionPathPlugin);

    // üëÅÔ∏è‚Äçüó®Ô∏è Ï†ÑÏó≠Ïóê Í∞êÏ†ï Ïπ¥Îìú ÌÉÄÏûÖ Ï†ïÏùò
    const emotionTypes = [
      {
        name: "INTUNE",
        description: "ÎãπÏã†ÏùÄ ÎÇ¥Î©¥Ïùò Ï£ºÌååÏàòÏóê Ï°∞Ïú®Îêú Í∞êÍ∞ÅÌòï Ïù∏Í∞ÑÏûÖÎãàÎã§."
      },
      {
        name: "VISUALIZER",
        description: "ÎãπÏã†ÏùÄ ÏãúÍ∞Å Ï†ïÎ≥¥Î•º ÌÜµÌï¥ ÏÑ∏Í≥ÑÎ•º Ïù∏ÏãùÌïòÎäî Í∞êÍ∞ÅÌòï Ïù∏Í∞ÑÏûÖÎãàÎã§."
      },
      {
        name: "SOUNDDRIFTER",
        description: "ÏÜåÎ¶¨Ïùò ÌùêÎ¶ÑÏóê Îî∞Îùº Í∞êÏ†ïÏùÑ Îñ†Ïò¨Î¶¨Îäî Í≥µÍ∞êÍ∞ÅÏûêÏûÖÎãàÎã§."
      },
      {
        name: "TACTILE SEEKER",
        description: "Ï¥âÍ∞ÅÏùÑ ÌÜµÌï¥ ÌòÑÏã§ÏùÑ ÎäêÎÅºÍ≥† Í∞êÏ†ïÏùÑ ÏùΩÏñ¥ÎÇ¥Îäî ÌÉÄÏûÖÏûÖÎãàÎã§."
      }
    ];

    document.body.addEventListener('click', () => {
      const audio = document.getElementById("bgm");
      if (audio.paused) {
        audio.volume = 0.4;
        audio.play();
      }
    }, { once: true });

    const log = document.getElementById("systemLog");
    const logMessages = [
      "[LOG] ÏûÖÏûê ÏßÑÏûÖ ÌôïÏù∏...",
      "[LOG] ÎÖ∏Îìú 1 Î∂ÑÏÑù Ï§ë...",
      "[LOG] Í∞êÏ†ï Î∞òÎ≥µ Ìå®ÌÑ¥ Í∞êÏßÄÎê®...",
      "[LOG] Î∂àÏïàÏ†ï ÎÖ∏Îìú Ï†ëÍ∑º Ï§ë...",
      "[LOG] Í∞êÏ†ï ÏΩîÎìú Î¶¨Ï∂îÏñº ÏßÑÌñâ Ï§ë..."
    ];

    let logIndex = 0;
    const logInterval = setInterval(() => {
      if (logIndex < logMessages.length) {
        log.textContent = logMessages[logIndex];
        logIndex++;
      } else {
        clearInterval(logInterval);
      }
    }, 1600);

    function revealCard(cardId) {
      gsap.to(`#${cardId}`, {
        display: 'block',
        opacity: 1,
        scale: 1,
        duration: 1,
        ease: "back.out(1.7)"
      });
    }

    gsap.to("#particle", {
      duration: 8,
      repeat: 0,
      ease: "power1.inOut",
      motionPath: {
        path: "#emotionPath",
        align: "#emotionPath",
        autoRotate: true
      },
      onUpdate: function () {
        const particle = document.querySelector("#particle");
        const rect = particle.getBoundingClientRect();

        const secretZoneX = window.innerWidth * 0.7;
        const secretZoneY = window.innerHeight * 0.75;
        const range = 30;

        if (!window.secretChecked && Math.abs(rect.x - secretZoneX) < range && Math.abs(rect.y - secretZoneY) < range) {
          window.secretChecked = true;
          if (Math.random() < 0.15) {
            revealCard("secretCard");
            window.secretRevealed = true;
            log.textContent = "[LOG] ÎπÑÎ∞Ä Ïπ¥Îìú Ï∂úÎ†•Îê® :: [SECRET CARD - ??]";
          } else {
            log.textContent = "[LOG] Î∂àÏïàÏ†ï ÎÖ∏Îìú ÌÜµÍ≥º :: ÎπÑÎ∞Ä Ïπ¥Îìú ÏóÜÏùå";
          }
        }
      },
      onComplete: () => {
        if (!window.secretRevealed) {
          revealCard("finalCard");
          log.textContent = "[LOG] Î¶¨Ï∂îÏñº ÏôÑÎ£å :: [ECLIPSED CORE] Ï∂úÎ†•";
        }
      }
    });

    document.getElementById("finalCard").addEventListener("click", () => {
      const desc = document.getElementById("cardDescription");
      const systemLog = document.getElementById("systemLog");

      const randomIndex = Math.floor(Math.random() * emotionTypes.length);
      const selected = emotionTypes[randomIndex];

      console.log("üí° Ïπ¥Îìú ÌÅ¥Î¶≠Îê®:", selected.name);

      document.getElementById("finalCard").textContent = `[${selected.name}]`;
      desc.innerHTML = selected.description;
      desc.style.visibility = "visible";

      gsap.set(desc, { opacity: 0, y: 10 });
      gsap.to(desc, { opacity: 1, y: 0, duration: 1.2, ease: "power2.out" });

      systemLog.textContent = `[SYSTEM LOG] Í∞êÏ†ï ÏΩîÎìú [${selected.name}] Î¶¨Ï∂îÏñº Ïã§ÌñâÎê®...`;
    });
  </script>
</body>
</html>
